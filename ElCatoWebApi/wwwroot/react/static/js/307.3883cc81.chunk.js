"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[307,442],{9468:function(e,t,n){n.d(t,{Z:function(){return c}});var l=n(3433),i=n(9439),s=n(2791),r=n(9618),a=n(4442),o=n(184);function c(e){var t,n=e.model,c=e.setModel,u=e.models,d=e.setModels,h=e.sort,f=e.defaultModel,m=s.useContext(r.St),v=s.useState(null),x=(0,i.Z)(v,2),b=x[0],j=x[1],p=s.useState(null),g=(0,i.Z)(p,2),N=g[0],w=g[1],y="Create",S=s.useState(y),Z=(0,i.Z)(S,2),k=Z[0],C=Z[1];function M(t){t.preventDefault(),j(null),w(null),c(f),document.querySelector("form[id=mainForm]").reset(),document.querySelectorAll("button").forEach((function(e){return e.disabled=!1})),e.reset&&e.reset(t)}function O(e){M(e),e.target.disabled=!0,C("Edit");var t=e.target.value,n=u.find((function(e){return e.id==t}));c(n)}return s.useEffect((function(){r.hi.get(e.apiPath).then((function(e){var t=e.data;h(t),d(t)})).catch((function(e){console.log(e)}))}),[]),(0,o.jsxs)("div",{className:"w-full max-w-md sm:max-w-none h-full tajawal lg:mt-5",children:[(0,o.jsxs)("form",{id:"mainForm",children:[(0,o.jsxs)("h1",{className:"flex justify-between",children:[(0,o.jsxs)("span",{className:"text-2xl",children:[k," ",n?n.title:e.title]}),(0,o.jsx)("button",{className:"btn btn-primary",onClick:function(t){M(t),C(y),e.handleCreate&&e.handleCreate(t)},children:"New"})]}),e.children,(0,o.jsxs)("div",{className:"mt-5",children:[(0,o.jsx)("button",{id:"submit",className:"btn btn-primary btn-block",onClick:function(t){document.querySelector("button[id=submit]").disabled=!0,r.hi.post("".concat(e.apiPath,"/upsert"),n).then((function(e){var n;e.status.toString().startsWith("2")?(c(e.data),n=k===y?[].concat((0,l.Z)(u),[e.data]):u.map((function(t){return t.id==e.data.id?e.data:t})),h(n),d(n),M(t),w("model saved successfully")):j(JSON.stringify(e))})).catch((function(e){j(JSON.stringify(e.message))})).finally((function(){document.querySelector("button[id=submit]").disabled=!1}))},children:k}),b&&(0,o.jsx)(a.default,{className:"alert-error",children:b}),N&&(0,o.jsx)(a.default,{className:"alert-success",children:N})]})]}),(0,o.jsx)("div",{className:"mt-10"}),(0,o.jsxs)("h1",{className:"text-2xl",children:["Your ",e.title]}),(0,o.jsx)("div",{className:"overflow-auto w-full max-h-[30rem]",children:(0,o.jsxs)("table",{className:"table",children:[(0,o.jsx)("thead",{className:"sticky top-0 bg-base-100",children:(0,o.jsxs)("tr",{children:[null===(t=e.cols)||void 0===t?void 0:t.map((function(e,t){return(0,o.jsx)("th",{children:e.label},t)})),m.isAdmin&&(0,o.jsx)("th",{children:"Actions"})]})}),(0,o.jsx)("tbody",{children:null===u||void 0===u?void 0:u.map((function(t,n){var l;return(0,o.jsxs)("tr",{children:[null===(l=e.cols)||void 0===l?void 0:l.map((function(e,n){return(0,o.jsx)("td",{children:e.getValue(t)},n)})),m.isAdmin&&(0,o.jsxs)("td",{children:[(0,o.jsx)("button",{className:"btn btn-sm btn-error hover:bg-red-900",value:t.id,onClick:function(t){return window.confirm("Are you sure you want to delete this item?")?function(t){M(t);var n=t.target.value;r.hi.delete("".concat(e.apiPath,"/").concat(n)).then((function(e){e.status.toString().startsWith("2")?(d(u.filter((function(e){return e.id!=n}))),w("Item deleted successfully")):j(JSON.stringify(e))})).catch((function(e){j(JSON.stringify(e.message))})),e.handleDelete&&e.handleDelete(t)}(t):null},children:"Delete"}),(0,o.jsx)("button",{className:"btn btn-sm btn-secondary",value:t.id,onClick:O,children:"Edit"})]})]},n)}))})]})}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{})]})}},4442:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var l=n(184);function i(e){return(0,l.jsxs)("div",{className:"alert flex "+e.className,children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,l.jsx)("span",{className:"w-full",children:e.children})]})}},6919:function(e,t,n){n.d(t,{Z:function(){return i}});var l=n(184);function i(e){return(0,l.jsxs)("div",{className:"form-control w-full "+e.className,children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:e.label})}),e.children]})}},7307:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var l=n(8683),i=n(9439),s=n(2791),r=n(9468),a=n(6919),o=n(9618),c=n(184);function u(){var e=s.useState(null),t=(0,i.Z)(e,2),n=t[0],u=t[1],d=s.useState(null),h=(0,i.Z)(d,2),f=h[0],m=h[1],v=s.useState(null),x=(0,i.Z)(v,2),b=x[0],j=x[1];return s.useEffect((function(){o.hi.get("/sections").then((function(e){j(e.data)})).catch((function(e){console.log(e)}))}),[]),(0,c.jsxs)(r.Z,{sort:function(e){e.sort((function(e,t){var n,l,i,s;return(null===(n=e.section)||void 0===n?void 0:n.order)==(null===(l=t.section)||void 0===l?void 0:l.order)?e.order-t.order:(null===(i=e.section)||void 0===i?void 0:i.order)-(null===(s=t.section)||void 0===s?void 0:s.order)}))},model:n,setModel:u,models:f,setModels:m,title:"Cards",apiPath:"/cards",cols:[{name:"id",label:"ID",getValue:function(e){return e.id}},{name:"title",label:"Title",getValue:function(e){return e.title}},{name:"order",label:"Order",getValue:function(e){return e.order}},{name:"section",label:"Section",getValue:function(e){var t;return null===(t=e.section)||void 0===t?void 0:t.title}}],children:[(0,c.jsx)("input",{type:"hidden",name:"id",value:n?n.id:0}),(0,c.jsx)(a.Z,{label:"Title",children:(0,c.jsx)("input",{name:"title",type:"text",className:"input input-bordered",value:n?n.title:"",onChange:function(e){u((0,l.Z)((0,l.Z)({},n),{},{title:e.target.value}))}})}),(0,c.jsx)(a.Z,{label:"Order",children:(0,c.jsx)("input",{name:"order",type:"number",className:"input input-bordered",value:n?n.order:"",onChange:function(e){u((0,l.Z)((0,l.Z)({},n),{},{order:e.target.value}))}})}),(0,c.jsx)(a.Z,{label:"Section",children:(0,c.jsx)("select",{name:"sectionId",className:"select select-bordered w-full",value:n?n.sectionId:"",onChange:function(e){u((0,l.Z)((0,l.Z)({},n),{},{sectionId:e.target.value}))},children:null===b||void 0===b?void 0:b.map((function(e,t){return(0,c.jsx)("option",{value:e.id,children:e.title},t)}))})})]})}}}]);
//# sourceMappingURL=307.3883cc81.chunk.js.map