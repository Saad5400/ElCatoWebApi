"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[316],{4559:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(4165),s=n(3433),a=n(5861),l=n(9439),i=n(4031),c=n(1391),o=n(7313),u=n(6417);function d(e){var t=e.filterText,n=e.onFilter;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"w-full mt-5",children:(0,u.jsx)("input",{className:"input join-item w-full",placeholder:"Search",id:"search",type:"text",value:t,onChange:n})})})}function f(e){var t,n=(0,o.useState)(""),r=(0,l.Z)(n,2),s=r[0],a=r[1],i=null===(t=e.data)||void 0===t?void 0:t.filter((function(t){return e.columns.some((function(e){var n="function"===typeof e.selector?e.selector(t):t[e.selector];return n?n.toString().toLowerCase().includes(s.toLowerCase()):""}))})),c=(0,o.useState)(1),f=(0,l.Z)(c,2),h=f[0],m=f[1],x=(0,o.useState)(10),v=(0,l.Z)(x,2),p=v[0],j=v[1],b=(0,o.useState)([]),g=(0,l.Z)(b,2),N=g[0],w=g[1];return(0,o.useEffect)((function(){var t=null===i||void 0===i?void 0:i.slice((h-1)*p,h*p);w(null===t||void 0===t?void 0:t.map((function(t,n){return(0,u.jsx)("tr",{children:e.columns.map((function(e,n){return(0,u.jsx)("td",{children:"function"===typeof e.selector?e.selector(t):e.cell(t)},n)}))},n)})))}),[s,h,p,e.data]),(0,o.useEffect)((function(){m(1)}),[s]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"flex flex-row justify-between w-full mt-5",children:[(0,u.jsx)("div",{children:(0,u.jsxs)("select",{className:"select select-bordered w-full max-w-xs",value:p||"",onChange:function(e){return j(e.target.value)},children:[(0,u.jsx)("option",{children:"5"}),(0,u.jsx)("option",{children:"10"}),(0,u.jsx)("option",{children:"25"})]})}),(0,u.jsxs)("div",{className:"join",children:[(0,u.jsx)("button",{className:"join-item btn",onClick:function(){return m(h-1)},disabled:1===h,children:"\xab"}),(0,u.jsx)("select",{className:"join-item select",value:h||"",onChange:function(e){return m(e.target.value)},children:i&&Array.from(Array(Math.ceil((null===i||void 0===i?void 0:i.length)/p)).keys()).map((function(e){return(0,u.jsxs)("option",{value:e+1,children:["Page ",e+1]},e)}))}),(0,u.jsx)("button",{className:"join-item btn",onClick:function(){return m(h+1)},disabled:null==i||(null===i||void 0===i?void 0:i.length)<h*p,children:"\xbb"})]})]}),(0,u.jsx)(d,{onFilter:function(e){return a(e.target.value)},filterText:s}),(0,u.jsx)("div",{className:"overflow-x-auto",children:(0,u.jsxs)("table",{className:"table bg-base-300",children:[(0,u.jsx)("thead",{children:(0,u.jsx)("tr",{className:"bg-base-100",children:e.columns.map((function(e,t){return(0,u.jsx)("th",{className:"min-w-[100px]",children:e.name},t)}))})}),(0,u.jsx)("tbody",{children:N})]})})]})}var h=n(3386);function m(e){var t=e.model,n=e.setModel,d=e.models,m=e.setModels,x=e.sort,v=e.defaultModel,p=(0,o.useContext)(i.St),j=(0,o.useState)(null),b=(0,l.Z)(j,2),g=b[0],N=b[1],w=(0,o.useState)(null),Z=(0,l.Z)(w,2),y=Z[0],S=Z[1],C="Create",k=(0,o.useState)(C),A=(0,l.Z)(k,2),M=A[0],P=A[1];function I(){return(I=(0,a.Z)((0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,h.Z)();case 2:n=t.sent,i.hi.defaults.headers.common["Cache-Control"]="no-cache",i.hi.get(e.apiPath,{params:{fingerPrint:n}}).then((function(e){var t=e.data;x(t),m(t)})).catch((function(e){console.log(e)}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t){t.preventDefault(),N(null),S(null),n(v),document.querySelector("form[id=mainForm]").reset(),document.querySelectorAll("button").forEach((function(e){return e.disabled=!1})),e.reset&&e.reset(t)}function F(t){if(window.confirm("Are you sure you want to delete this item?")){E(t);var n=t.target.value;i.hi.delete("".concat(e.apiPath,"/").concat(n)).then((function(e){e.status.toString().startsWith("2")?(m(d.filter((function(e){return e.id!=n}))),S("Item deleted successfully")):N(JSON.stringify(e))})).catch((function(e){N(JSON.stringify(e.message))})),e.handleDelete&&e.handleDelete(t)}}function D(e){E(e),e.target.disabled=!0,P("Edit");var t=e.target.value,r=d.find((function(e){return e.id==t}));n(r)}(0,o.useEffect)((function(){p.isAdmin?i.hi.get(e.apiPath).then((function(e){var t=e.data;x(t),m(t)})).catch((function(e){console.log(e)})):function(){I.apply(this,arguments)}()}),[]);var L=e.cols;return L=[].concat((0,s.Z)(e.cols),[{name:"Actions",cell:function(e){return(0,u.jsxs)("div",{className:"btn-group",children:[(0,u.jsx)("button",{className:"btn btn-primary",value:e.id,onClick:D,children:"Edit"}),(0,u.jsx)("button",{className:"btn btn-error",value:e.id,onClick:F,children:"Delete"})]})}},{name:"Created At",selector:function(e){return e.createdAt}}]),(0,u.jsxs)("div",{className:"w-full h-full tajawal lg:mt-5",children:[(0,u.jsxs)("form",{id:"mainForm",children:[(0,u.jsxs)("h1",{className:"flex justify-between",children:[(0,u.jsxs)("span",{className:"text-2xl",children:[M," ",t?t.title:e.title]}),(0,u.jsx)("button",{className:"btn btn-primary",onClick:function(t){E(t),P(C),e.handleCreate&&e.handleCreate(t)},children:"Load new"})]}),e.children,(0,u.jsxs)("div",{className:"mt-5",children:[(0,u.jsx)("button",{id:"submit",className:"btn btn-primary btn-block",onClick:function(r){document.querySelector("button[id=submit]").disabled=!0,i.hi.post("".concat(e.apiPath,"/upsert"),t).then((function(e){var t;e.status.toString().startsWith("2")&&(n(e.data),t=M===C?[].concat((0,s.Z)(d),[e.data]):d.map((function(t){return t.id==e.data.id?e.data:t})),x(t),m(t),E(r),S("item was saved successfully"))})).catch((function(e){var t;console.log(e),N(e.message+": "+JSON.stringify(null===(t=e.response)||void 0===t?void 0:t.data))})).finally((function(){document.querySelector("button[id=submit]").disabled=!1}))},children:M}),g&&(0,u.jsx)(c.Z,{className:"alert-error",children:g}),y&&(0,u.jsx)(c.Z,{className:"alert-success",children:y})]})]}),(0,u.jsx)("div",{className:"mt-10"}),(0,u.jsxs)("h1",{className:"text-2xl",children:["Your ",e.title]}),(0,u.jsx)("div",{className:"overflow-auto w-full",children:(0,u.jsx)(f,{title:e.title,data:d,columns:L})}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{})]})}},1391:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(6417);function s(e){return(0,r.jsxs)("div",{className:"alert flex "+e.className,dir:e.dir,children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{className:"w-full",children:e.children})]})}},2050:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(6417);function s(e){return(0,r.jsxs)("div",{className:"form-control w-full "+e.className,children:[(0,r.jsxs)("label",{className:"label",children:[(0,r.jsx)("span",{className:"label-text",children:e.label}),e.hint&&(0,r.jsx)("span",{className:"label-text-alt",children:e.hint})]}),e.children]})}},2316:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(8683),s=n(9439),a=n(7313),l=n(4559),i=n(2050),c=n(6417);function o(e){var t=(0,a.useState)(null),n=(0,s.Z)(t,2),o=n[0],u=n[1],d=(0,a.useState)(null),f=(0,s.Z)(d,2),h=f[0],m=f[1];return(0,c.jsxs)(l.Z,{sort:function(e){e.sort((function(e,t){return e.order-t.order}))},model:o,setModel:u,models:h,setModels:m,title:"Sections",apiPath:"/sections",cols:[{name:"ID",selector:function(e,t){return e.id}},{name:"Title",selector:function(e,t){return e.title}},{name:"Order",selector:function(e,t){return e.order}}],children:[(0,c.jsx)("input",{type:"hidden",name:"id",value:o?o.id:0}),(0,c.jsx)(i.Z,{label:"Title",children:(0,c.jsx)("input",{name:"title",type:"text",className:"input input-bordered",value:o?o.title:"",onChange:function(e){u((0,r.Z)((0,r.Z)({},o),{},{title:e.target.value}))}})}),(0,c.jsx)(i.Z,{label:"Order",children:(0,c.jsx)("input",{name:"order",type:"number",className:"input input-bordered",value:o?o.order:"",onChange:function(e){u((0,r.Z)((0,r.Z)({},o),{},{order:e.target.value}))}})})]})}},3386:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(4165),s=n(5861),a=n(2327);function l(){return i.apply(this,arguments)}function i(){return(i=(0,s.Z)((0,r.Z)().mark((function e(){var t,n,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("visitorId"))){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,a.ZP.load();case 7:return n=e.sent,e.next=10,n.get();case 10:return s=e.sent,l=s.visitorId,localStorage.setItem("visitorId",l),e.abrupt("return",l);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);