{"version":3,"file":"static/js/589.c61d29f2.chunk.js","mappings":"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","sources":["pages/Page.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { api } from \"../App\";\r\nimport Dimmer from \"../components/Dimmer\";\r\nimport { LayoutContext } from \"./Layout\";\r\n\r\nexport default function Page(props) {\r\n\r\n    const [loading, setLoading] = useState(true)\r\n    const [title, setTitle] = useState(\"\")\r\n    const [iframe, setIframe] = useState(<></>)\r\n    const [content, setContent] = useState(<></>)\r\n    const layoutContext = React.useContext(LayoutContext);\r\n\r\n    const contentRef = useRef(null);\r\n\r\n    const { id } = useParams();\r\n\r\n    useEffect(() => {\r\n        api.get(\"/pages/\" + id).then(res => {\r\n            setLoading(false);\r\n            setTitle(`${res.data?.card?.section?.title} - ${res.data?.card?.title} - ${res.data?.title}`);\r\n            let content = res.data?.content;\r\n            let links = [];\r\n            let h1s = content.match(/<h1.*?>.*?<\\/h1>/g);\r\n            if (h1s) {\r\n                h1s.forEach(h1 => {\r\n                    // add an id to each h1 that contains the h1's innerText\r\n                    let h1Content = h1.match(/<h1.*?>(.*?)<\\/h1>/)[1];\r\n                    let h1InnerText = h1Content.replace(/<.*?>/g, \"\");\r\n                    // limit inner text to 10 characters\r\n                    const limit = 15;\r\n                    if (h1InnerText.length > limit) {\r\n                        h1InnerText = h1InnerText.substring(0, limit) + \"...\";\r\n                    }\r\n                    let h1Id = h1InnerText.toLowerCase().replace(/ /g, \"-\");\r\n                    content = content.replace(h1, `<h1 id=\"${h1Id}\">${h1Content}</h1>`);\r\n                    links.push({\r\n                        id: h1Id,\r\n                        name: h1InnerText\r\n                    });\r\n\r\n                });\r\n            }\r\n            layoutContext.setLinks(links);\r\n            setContent(\r\n                <div ref={contentRef} dangerouslySetInnerHTML={{ __html: content }} />\r\n            );\r\n        }).catch(err => {\r\n            // console.log(err);\r\n        });\r\n    }, [id, layoutContext])\r\n\r\n    useEffect(() => {\r\n        // if there is an h1 with the exact text: \"Content is fetched from\" in the div\r\n        if (contentRef?.current?.querySelector('h1')?.innerText.toString().trim().toLowerCase().includes(\"content is fetched from\")) {\r\n            setIframe(\r\n                <iframe src={contentRef.current.querySelector('a')?.href} className=\"w-full h-[calc(100vh-4rem)]\" title=\"iframe\" />\r\n            );\r\n        }\r\n    }, [content])\r\n\r\n    useEffect(() => {\r\n        document.title = title;\r\n    }, [title])\r\n\r\n    const css = `\r\n    .toastui-editor-ww-code-block-highlighting::after {\r\n        background-image: unset !important;\r\n        background-color: #ffee00 !important;\r\n        padding: 0px 10px !important;\r\n    }\r\n    `\r\n\r\n    return (\r\n        <>\r\n            <Dimmer style={{\r\n                '--tw-bg-opacity': '1',\r\n            }} >\r\n                <div className=\"max-w-7xl mx-auto\">\r\n                    <h1 className=\"text-3xl md:text-4xl lg:text-5xl font-bold text-base-content mb-5\">\r\n                        {loading ?\r\n                            <div role=\"status\" className=\"animate-pulse\">\r\n                                <div className=\"h-2.5 bg-base-content rounded-full w-full mb-4\"></div>\r\n                            </div>\r\n                            : title}\r\n                        <hr className=\"border-base-content\" />\r\n                    </h1>\r\n                    <style>{css}</style>\r\n                    <article id=\"content\" className=\"mb-5 prose max-w-full\r\n                                        prose-sm md:prose-md xl:prose-lg\r\n                                        prose-p:m-0\r\n                                        prose-hr:m-0\r\n                                        prose-code:bg-slate-500\r\n                                        prose-code:bg-opacity-30\r\n                                        prose-a:link-hover\r\n                                        prose-a:link-primary\r\n                                        font-bold\r\n                                        tajawal\r\n                                    \"\r\n                    >\r\n                        {loading &&\r\n                            <div role=\"status\" className=\"max-w-3xl animate-pulse\">\r\n                                <div className=\"h-2 bg-base-content mb-2.5\"></div>\r\n                                <div className=\"h-2 bg-base-content mb-2.5\"></div>\r\n                                <div className=\"h-2 bg-base-content max-w-[330px] mb-2.5\"></div>\r\n                                <div className=\"h-2 bg-base-content max-w-[300px] mb-2.5\"></div>\r\n                                <div className=\"h-2 bg-base-content mb-2.5\"></div>\r\n                                <div className=\"h-2 bg-base-content mb-2.5\"></div>\r\n                                <div className=\"h-2 bg-base-content max-w-[330px] mb-2.5\"></div>\r\n                                <div className=\"h-2 bg-base-content max-w-[300px] mb-2.5\"></div>\r\n                                <div className=\"h-2 bg-base-content mb-2.5\"></div>\r\n                                <div className=\"h-2 bg-base-content mb-2.5\"></div>\r\n                                <div className=\"h-2 bg-base-content max-w-[330px] mb-2.5\"></div>\r\n                                <div className=\"h-2 bg-base-content max-w-[300px] mb-2.5\"></div>\r\n                                <div className=\"h-2 bg-base-content max-w-[360px]\"></div>\r\n                            </div>\r\n                        }\r\n                        {content}\r\n                        {iframe}\r\n                    </article>\r\n                </div>\r\n            </Dimmer>\r\n        </>\r\n    );\r\n}"],"names":["Page","props","_useState","useState","_useState2","_slicedToArray","loading","setLoading","_useState3","_useState4","title","setTitle","_useState5","_jsx","_Fragment","_useState6","iframe","setIframe","_useState7","_useState8","content","setContent","layoutContext","React","LayoutContext","contentRef","useRef","id","useParams","useEffect","api","get","then","res","_res$data","_res$data$card","_res$data$card$sectio","_res$data2","_res$data2$card","_res$data3","_res$data4","concat","data","card","section","links","h1s","match","forEach","h1","h1Content","h1InnerText","replace","length","substring","h1Id","toLowerCase","push","name","setLinks","ref","dangerouslySetInnerHTML","__html","catch","err","_contentRef$current","_contentRef$current$q","_contentRef$current$q2","current","querySelector","innerText","toString","trim","includes","src","href","className","document","children","Dimmer","style","_jsxs","role"],"sourceRoot":""}