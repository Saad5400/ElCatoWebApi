{"version":3,"file":"static/js/818.ff089073.chunk.js","mappings":"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","sources":["components/RestTable.js"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\r\nimport { Link, Outlet, useLocation } from \"react-router-dom\";\r\nimport { api } from \"../App\";\r\n\r\nexport const DataContext = createContext(null);\r\n\r\nexport default function RestTable(props) {\r\n\r\n    const [data, setData] = useState(null)\r\n    const [reload, setReload] = useState(false)\r\n\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n        if (location.pathname.includes('upsert')) {\r\n            return;\r\n        }\r\n        api.get('/' + props.title)\r\n            .then(res => {\r\n                if (res.status === 200) {\r\n                    let data = res.data;\r\n\r\n                    if (data.length > 0) {\r\n                        if (props.ignore) {\r\n                            props.ignore.forEach(element => {\r\n                                data = data.map((item) => {\r\n                                    delete item[element]\r\n                                    return item\r\n                                })\r\n                            });\r\n                        }\r\n                        // sort data by order\r\n                        data = data.sort((a, b) => {\r\n                            return a.order - b.order;\r\n                        })\r\n                        setData(data);\r\n                    }\r\n                }\r\n            }).catch(err => {\r\n                // console.log(err);\r\n            });\r\n    }, [location.pathname, reload]);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"w-full flex justify-between\">\r\n                <h1 className=\"text-3xl text-primary my-2 ms-5\">\r\n                    {props.title}\r\n                </h1>\r\n                <Link to={\"/admin/\" + props.title + \"/upsert\"}>\r\n                    <button className=\"btn btn-primary btn-sm me-5 my-2\">New</button>\r\n                </Link>\r\n            </div>\r\n            <DataContext.Provider value={{ data: data }}>\r\n                <Outlet />\r\n            </DataContext.Provider>\r\n            <div className=\"overflow-x-auto w-[28rem] sm:w-full\">\r\n                <div className=\"table-container\">\r\n                    <table className=\"table table-hover\">\r\n                        <thead>\r\n                            <tr>\r\n                                {\r\n                                    data && Object.keys(data[0]).map((key, index) => {\r\n                                        return (\r\n                                            <th key={index}>\r\n                                                {key}\r\n                                            </th>\r\n                                        )\r\n                                    })\r\n                                }\r\n                                <th>\r\n                                    Actions\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {\r\n                                data && data.map((item, index) => {\r\n                                    return (\r\n                                        <tr key={index}>\r\n                                            {\r\n                                                Object.values(item).map((value, index) => {\r\n                                                    return (\r\n                                                        <td key={index}>\r\n                                                            {\r\n                                                                typeof value === 'object' ? value.title : value\r\n                                                            }\r\n                                                        </td>\r\n                                                    )\r\n                                                })\r\n                                            }\r\n                                            <td>\r\n                                                <Link to={\"/admin/\" + props.title + \"/upsert/\" + item.id}>\r\n                                                    <button className=\"link link-secondary\">Edit</button>\r\n                                                </Link>\r\n                                                &nbsp;\r\n                                                <button onClick={e => {\r\n                                                    const confirm = window.confirm('Are you sure you want to delete this item?');\r\n                                                    if (confirm) {\r\n                                                        api.delete('/' + props.title + '/' + item.id)\r\n                                                            .then(res => {\r\n                                                                if (res.status.toString().startsWith('2')) {\r\n                                                                    setReload(!reload);\r\n                                                                }\r\n                                                            }).catch(err => {\r\n                                                                // console.log(err);\r\n                                                            });\r\n                                                    }\r\n                                                }} className=\"link link-error\">Delete</button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n            <br />\r\n        </>\r\n    );\r\n}"],"names":["DataContext","createContext","RestTable","props","_useState","useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","reload","setReload","location","useLocation","useEffect","pathname","includes","api","get","title","then","res","status","length","ignore","forEach","element","map","item","sort","a","b","order","catch","err","_jsxs","_Fragment","children","className","_jsx","Link","to","Provider","value","Outlet","Object","keys","key","index","values","id","onClick","e","window","confirm","delete","toString","startsWith"],"sourceRoot":""}