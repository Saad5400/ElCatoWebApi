"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[830,818],{9818:function(t,e,n){n.r(e),n.d(e,{DataContext:function(){return u},default:function(){return o}});var i=n(9439),s=n(2791),a=n(7689),r=n(1087),l=n(9618),c=n(184),u=(0,s.createContext)(null);function o(t){var e=(0,s.useState)(null),n=(0,i.Z)(e,2),o=n[0],d=n[1],f=(0,s.useState)(!1),h=(0,i.Z)(f,2),m=h[0],x=h[1],j=(0,a.TH)();return(0,s.useEffect)((function(){j.pathname.includes("upsert")||l.hi.get("/"+t.title).then((function(e){if(200===e.status){var n=e.data;n.length>0&&(t.ignore&&t.ignore.forEach((function(t){n=n.map((function(e){return delete e[t],e}))})),n=n.sort((function(t,e){return t.order-e.order})),d(n))}})).catch((function(t){}))}),[j.pathname,m]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"w-full flex justify-between",children:[(0,c.jsx)("h1",{className:"text-3xl text-primary my-2 ms-5",children:t.title}),(0,c.jsx)(r.rU,{to:"/admin/"+t.title+"/upsert",children:(0,c.jsx)("button",{className:"btn btn-primary btn-sm me-5 my-2",children:"New"})})]}),(0,c.jsx)(u.Provider,{value:{data:o},children:(0,c.jsx)(a.j3,{})}),(0,c.jsx)("div",{className:"overflow-x-auto w-[28rem] sm:w-full",children:(0,c.jsx)("div",{className:"table-container",children:(0,c.jsxs)("table",{className:"table table-hover",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[o&&Object.keys(o[0]).map((function(t,e){return(0,c.jsx)("th",{children:t},e)})),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:o&&o.map((function(e,n){return(0,c.jsxs)("tr",{children:[Object.values(e).map((function(t,e){return(0,c.jsx)("td",{children:"object"===typeof t?t.title:t},e)})),(0,c.jsxs)("td",{children:[(0,c.jsx)(r.rU,{to:"/admin/"+t.title+"/upsert/"+e.id,children:(0,c.jsx)("button",{className:"link link-accent",children:"Edit"})}),"\xa0",(0,c.jsx)("button",{onClick:function(n){window.confirm("Are you sure you want to delete this item?")&&l.hi.delete("/"+t.title+"/"+e.id).then((function(t){t.status.toString().startsWith("2")&&x(!m)})).catch((function(t){}))},className:"link link-error",children:"Delete"})]})]},n)}))})]})})}),(0,c.jsx)("br",{})]})}},830:function(t,e,n){n.r(e),n.d(e,{default:function(){return o}});var i=n(8683),s=n(9439),a=n(7689),r=n(9818),l=n(2791),c=n(9618),u=n(184);function o(t){var e=(0,a.UO)().id,n=(0,a.TH)(),o=(0,a.s0)(),d=e?"Update":"Create",f=r.DataContext._currentValue.data,h=f&&f.find((function(t){return t.id===parseInt(e)})),m=(0,l.useState)(!1),x=(0,s.Z)(m,2),j=x[0],p=x[1],b=(0,l.useState)(""),v=(0,s.Z)(b,2),w=v[0],y=v[1];return(0,l.useEffect)((function(){y(""),p(!1),h?Object.keys(h).forEach((function(t){document.getElementsByName(t)[0].value=h[t]})):document.querySelectorAll("input").forEach((function(t){"id"===t.name?t.value=0:t.value=""}))}),[n.pathname]),(0,u.jsx)("div",{className:"w-full flex justify-between",children:(0,u.jsxs)("div",{className:"my-2 mx-5 w-full",children:[(0,u.jsxs)("h1",{className:"text-warning",children:[d," ",w]}),(0,u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p(!0),c.hi.post("/"+t.title+"/upsert",(0,i.Z)({},Object.fromEntries(new FormData(e.target)))).then((function(e){e.status.toString().startsWith("2")&&(y("Success"),o("/admin/"+t.title))})).catch((function(t){y("Failed")})).finally((function(){p(!1)}))},children:[(0,u.jsx)("div",{className:"w-full grid lg:grid-cols-2 lg:gap-x-4",children:t.attributes&&Object.keys(t.attributes).map((function(e,n){return"id"===e?(0,u.jsx)("input",{name:e,type:"hidden"},e):(0,u.jsxs)("div",{className:"form-control w-full",children:[(0,u.jsx)("label",{className:"label label-text",children:e}),(0,u.jsx)("input",{name:e,type:t.attributes[e],placeholder:e,className:"input responsive-input input-bordered w-full"})]},e)}))}),(0,u.jsx)("br",{}),(0,u.jsx)("div",{className:"form-control w-full",children:(0,u.jsx)("button",{disabled:j,className:"btn btn-block btn-primary",children:j?(0,u.jsx)("div",{className:"loading loading-dots"}):d})})]})]})})}}}]);
//# sourceMappingURL=830.1d07575b.chunk.js.map