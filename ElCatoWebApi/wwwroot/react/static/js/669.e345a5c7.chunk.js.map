{"version":3,"file":"static/js/669.e345a5c7.chunk.js","mappings":"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","sources":["components/RestTable.js","components/Upsert.js","pages/admin/CardsUpsert.js"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\r\nimport { Link, Outlet, useLocation } from \"react-router-dom\";\r\nimport { api } from \"../App\";\r\n\r\nexport const DataContext = createContext(null);\r\n\r\nexport default function RestTable(props) {\r\n\r\n    const [data, setData] = useState(null)\r\n    const [reload, setReload] = useState(false)\r\n\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n        if (location.pathname.includes('upsert')) {\r\n            return;\r\n        }\r\n        api.get('/' + props.title)\r\n            .then(res => {\r\n                if (res.status === 200) {\r\n                    let data = res.data;\r\n\r\n                    if (data.length > 0) {\r\n                        if (props.ignore) {\r\n                            props.ignore.forEach(element => {\r\n                                data = data.map((item) => {\r\n                                    delete item[element]\r\n                                    return item\r\n                                })\r\n                            });\r\n                        }\r\n                        // sort data by order\r\n                        data = data.sort((a, b) => {\r\n                            return a.order - b.order;\r\n                        })\r\n                        setData(data);\r\n                    }\r\n                }\r\n            }).catch(err => {\r\n                // console.log(err);\r\n            });\r\n    }, [location.pathname, reload]);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"w-full flex justify-between\">\r\n                <h1 className=\"text-3xl text-primary my-2 ms-5\">\r\n                    {props.title}\r\n                </h1>\r\n                <Link to={\"/admin/\" + props.title + \"/upsert\"}>\r\n                    <button className=\"btn btn-primary btn-sm me-5 my-2\">New</button>\r\n                </Link>\r\n            </div>\r\n            <DataContext.Provider value={{ data: data }}>\r\n                <Outlet />\r\n            </DataContext.Provider>\r\n            <div className=\"overflow-x-auto w-[28rem] sm:w-full\">\r\n                <div className=\"table-container\">\r\n                    <table className=\"table table-hover\">\r\n                        <thead>\r\n                            <tr>\r\n                                {\r\n                                    data && Object.keys(data[0]).map((key, index) => {\r\n                                        return (\r\n                                            <th key={index}>\r\n                                                {key}\r\n                                            </th>\r\n                                        )\r\n                                    })\r\n                                }\r\n                                <th>\r\n                                    Actions\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {\r\n                                data && data.map((item, index) => {\r\n                                    return (\r\n                                        <tr key={index}>\r\n                                            {\r\n                                                Object.values(item).map((value, index) => {\r\n                                                    return (\r\n                                                        <td key={index}>\r\n                                                            {\r\n                                                                typeof value === 'object' ? value.title : value\r\n                                                            }\r\n                                                        </td>\r\n                                                    )\r\n                                                })\r\n                                            }\r\n                                            <td>\r\n                                                <Link to={\"/admin/\" + props.title + \"/upsert/\" + item.id}>\r\n                                                    <button className=\"link link-secondary\">Edit</button>\r\n                                                </Link>\r\n                                                &nbsp;\r\n                                                <button onClick={e => {\r\n                                                    const confirm = window.confirm('Are you sure you want to delete this item?');\r\n                                                    if (confirm) {\r\n                                                        api.delete('/' + props.title + '/' + item.id)\r\n                                                            .then(res => {\r\n                                                                if (res.status.toString().startsWith('2')) {\r\n                                                                    setReload(!reload);\r\n                                                                }\r\n                                                            }).catch(err => {\r\n                                                                // console.log(err);\r\n                                                            });\r\n                                                    }\r\n                                                }} className=\"link link-error\">Delete</button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    )\r\n                                })\r\n                            }\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n            <br />\r\n        </>\r\n    );\r\n}","import { useLocation, useNavigate, useParams } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { api } from \"../App\"\r\n\r\nexport function FormControl(props) {\r\n    return (\r\n        <div className={\"form-control w-full \" + props.className}>\r\n            <label className=\"label label-text\">{props.label}</label>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function Upsert(props) {\r\n    let { id } = useParams();\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const STATE = { UPDATE: \"Update\", CREATE: \"Create\" }\r\n    const state = id ? STATE.UPDATE : STATE.CREATE;\r\n\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [status, setStatus] = useState('');\r\n\r\n    useEffect(() => {\r\n        setStatus('');\r\n        setIsLoading(false);\r\n\r\n        props.reloadEffect();\r\n    }, [location.pathname]);\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n\r\n        api.post('/' + props.title + '/upsert', {\r\n            ...Object.fromEntries(new FormData(e.target))\r\n        }).then(res => {\r\n            if (res.status.toString().startsWith('2')) {\r\n                setStatus('Success');\r\n                navigate('/admin/' + props.title);\r\n            }\r\n        }).catch(err => {\r\n            setStatus('Failed');\r\n        }).finally(() => {\r\n            setIsLoading(false);\r\n        });\r\n    }\r\n\r\n    return (<>\r\n        <div className=\"w-full flex justify-between\">\r\n            <div className=\"my-2 mx-5 w-full\">\r\n                <h1 className=\"text-warning\">\r\n                    {state} {status}\r\n                </h1>\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"w-full grid lg:grid-cols-2 lg:gap-x-4\">\r\n                        {props.children}\r\n                    </div>\r\n                    <br />\r\n                    <div className=\"form-control w-full\">\r\n                        <button disabled={isLoading} className=\"btn btn-block btn-primary\">{isLoading ? <div className=\"loading loading-dots\"></div> : state}</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </>)\r\n}","import Upsert from \"../../components/Upsert\";\r\nimport { FormControl } from \"../../components/Upsert\";\r\nimport { api } from \"../../App\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { DataContext } from \"../../components/RestTable\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nexport default function CardsUpsert(props) {\r\n\r\n    const [sections, setSections] = useState([]);\r\n\r\n    let { id } = useParams();\r\n    id = id ? id : 0;\r\n    const data = DataContext._currentValue.data;\r\n    const item = data && data.find(item => item.id === parseInt(id));\r\n\r\n    useEffect(() => {\r\n        api.get('/sections').then(res => {\r\n            if (res.status.toString().startsWith('2')) {\r\n                const options = res.data.map(section => {\r\n                    return (\r\n                        <option key={section.id} value={section.id}>{section.title}</option>\r\n                    )\r\n                });\r\n                setSections(options);\r\n            }\r\n        }\r\n        ).catch(err => {\r\n            // console.log(err);\r\n        });\r\n    }, []);\r\n\r\n    function reloadEffect() {\r\n        if (item) {\r\n            document.getElementsByName(\"title\")[0].value = item.title;\r\n            document.getElementsByName(\"subtitle\")[0].value = item.subtitle;\r\n            document.getElementsByName(\"order\")[0].value = item.order;\r\n            setTimeout(() => {\r\n                document.getElementsByName(\"sectionId\")[0].value = item.section.id;   \r\n            }, 250);\r\n        }\r\n        else {\r\n            document.getElementsByName(\"title\")[0].value = '';\r\n            document.getElementsByName(\"subtitle\")[0].value = '';\r\n            document.getElementsByName(\"order\")[0].value = 0;\r\n            document.getElementsByName(\"sectionId\")[0].value = 1;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Upsert reloadEffect={reloadEffect} title=\"cards\">\r\n            <input name=\"id\" type=\"hidden\" value={id} />\r\n            <FormControl label=\"Title\">\r\n                <input name=\"title\" type=\"text\" className=\"input responsive-input input-bordered w-full\" />\r\n            </FormControl>\r\n            <FormControl label=\"Sub-Title\">\r\n                <input name=\"subtitle\" type=\"text\" className=\"input responsive-input input-bordered w-full\" />\r\n            </FormControl>\r\n            <FormControl label=\"Order\">\r\n                <input name=\"order\" type=\"number\" className=\"input responsive-input input-bordered w-full\" />\r\n            </FormControl>\r\n            <FormControl label=\"Section\">\r\n                <select name=\"sectionId\" className=\"select responsive-select select-bordered w-full\">\r\n                    {sections}\r\n                </select>\r\n            </FormControl>\r\n        </Upsert>\r\n    );\r\n}"],"names":["DataContext","createContext","RestTable","props","_useState","useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","reload","setReload","location","useLocation","useEffect","pathname","includes","api","get","title","then","res","status","length","ignore","forEach","element","map","item","sort","a","b","order","catch","err","_jsxs","_Fragment","children","className","_jsx","Link","to","Provider","value","Outlet","Object","keys","key","index","values","id","onClick","e","window","confirm","delete","toString","startsWith","FormControl","label","Upsert","useParams","navigate","useNavigate","state","isLoading","setIsLoading","setStatus","reloadEffect","onSubmit","preventDefault","post","_objectSpread","fromEntries","FormData","target","finally","disabled","CardsUpsert","sections","setSections","_currentValue","find","parseInt","options","section","document","getElementsByName","subtitle","setTimeout","name","type"],"sourceRoot":""}