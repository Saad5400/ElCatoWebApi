"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[33,442],{9468:function(e,t,n){n.d(t,{Z:function(){return s}});var l=n(3433),a=n(9439),i=n(2791),r=n(9618),o=n(4442),c=n(184);function s(e){var t,n=e.model,s=e.setModel,d=e.models,u=e.setModels,v=e.sort,h=e.defaultModel,f=i.useContext(r.St),m=i.useState(null),x=(0,a.Z)(m,2),b=x[0],p=x[1],j=i.useState(null),g=(0,a.Z)(j,2),Z=g[0],N=g[1],y="Create",k=i.useState(y),S=(0,a.Z)(k,2),w=S[0],C=S[1];function M(t){t.preventDefault(),p(null),N(null),s(h),document.querySelector("form[id=mainForm]").reset(),document.querySelectorAll("button").forEach((function(e){return e.disabled=!1})),e.reset&&e.reset(t)}function I(e){M(e),e.target.disabled=!0,C("Edit");var t=e.target.value,n=d.find((function(e){return e.id==t}));s(n)}return i.useEffect((function(){r.hi.get(e.apiPath).then((function(e){var t=e.data;v(t),u(t)})).catch((function(e){console.log(e)}))}),[]),(0,c.jsxs)("div",{className:"w-full max-w-md sm:max-w-none h-full tajawal lg:mt-5",children:[(0,c.jsxs)("form",{id:"mainForm",children:[(0,c.jsxs)("h1",{className:"flex justify-between",children:[(0,c.jsxs)("span",{className:"text-2xl",children:[w," ",n?n.title:e.title]}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:function(t){M(t),C(y),e.handleCreate&&e.handleCreate(t)},children:"New"})]}),e.children,(0,c.jsxs)("div",{className:"mt-5",children:[(0,c.jsx)("button",{id:"submit",className:"btn btn-primary btn-block",onClick:function(t){document.querySelector("button[id=submit]").disabled=!0,r.hi.post("".concat(e.apiPath,"/upsert"),n).then((function(e){var n;e.status.toString().startsWith("2")?(s(e.data),n=w===y?[].concat((0,l.Z)(d),[e.data]):d.map((function(t){return t.id==e.data.id?e.data:t})),v(n),u(n),M(t),N("model saved successfully")):p(JSON.stringify(e))})).catch((function(e){p(JSON.stringify(e.message))})).finally((function(){document.querySelector("button[id=submit]").disabled=!1}))},children:w}),b&&(0,c.jsx)(o.default,{className:"alert-error",children:b}),Z&&(0,c.jsx)(o.default,{className:"alert-success",children:Z})]})]}),(0,c.jsx)("div",{className:"mt-10"}),(0,c.jsxs)("h1",{className:"text-2xl",children:["Your ",e.title]}),(0,c.jsx)("div",{className:"overflow-auto w-full max-h-[30rem]",children:(0,c.jsxs)("table",{className:"table",children:[(0,c.jsx)("thead",{className:"sticky top-0 bg-base-100",children:(0,c.jsxs)("tr",{children:[null===(t=e.cols)||void 0===t?void 0:t.map((function(e,t){return(0,c.jsx)("th",{children:e.label},t)})),f.isAdmin&&(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:null===d||void 0===d?void 0:d.map((function(t,n){var l;return(0,c.jsxs)("tr",{children:[null===(l=e.cols)||void 0===l?void 0:l.map((function(e,n){return(0,c.jsx)("td",{children:e.getValue(t)},n)})),f.isAdmin&&(0,c.jsxs)("td",{children:[(0,c.jsx)("button",{className:"btn btn-sm btn-error hover:bg-red-900",value:t.id,onClick:function(t){return window.confirm("Are you sure you want to delete this item?")?function(t){M(t);var n=t.target.value;r.hi.delete("".concat(e.apiPath,"/").concat(n)).then((function(e){e.status.toString().startsWith("2")?(u(d.filter((function(e){return e.id!=n}))),N("Item deleted successfully")):p(JSON.stringify(e))})).catch((function(e){p(JSON.stringify(e.message))})),e.handleDelete&&e.handleDelete(t)}(t):null},children:"Delete"}),(0,c.jsx)("button",{className:"btn btn-sm btn-secondary",value:t.id,onClick:I,children:"Edit"})]})]},n)}))})]})}),(0,c.jsx)("br",{}),(0,c.jsx)("br",{})]})}},4442:function(e,t,n){n.r(t),n.d(t,{default:function(){return a}});var l=n(184);function a(e){return(0,l.jsxs)("div",{className:"alert flex "+e.className,children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,l.jsx)("span",{className:"w-full",children:e.children})]})}},6919:function(e,t,n){n.d(t,{Z:function(){return a}});var l=n(184);function a(e){return(0,l.jsxs)("div",{className:"form-control w-full "+e.className,children:[(0,l.jsx)("label",{className:"label",children:(0,l.jsx)("span",{className:"label-text",children:e.label})}),e.children]})}},1033:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var l=n(8683),a=n(9439),i=n(2791),r=n(9468),o=n(6919),c=n(9618),s=n(4925),d=n(9687),u=(n(8838),n(6890),n(3342),n(6202),n(6783),n(2687),n(1786),n(8291),n(395),n(4601),n(6733),n(1108),n(6504),n(8924),n(769),n(288),n(1182),n(6168),n(5672),n(594),n(7711),n(4954),n(7935),n(1639),n(3660),n(7332),n(317),n(5637),n(1228),n(5278),n(560),n(1559),n(499),n(8743),n(6311)),v=n(8973),h=n(184),f=["init"];function m(e){var t=e.init,n=(0,s.Z)(e,f);return(0,h.jsx)(d.M,(0,l.Z)({init:(0,l.Z)((0,l.Z)({},t),{},{skin:"oxide-dark",content_css:!1,content_style:[u.Z,v.Z,t.content_style||""].join("\n")})},n))}function x(){var e,t=i.useRef(null),n={card:{}},s=i.useState(n),d=(0,a.Z)(s,2),u=d[0],v=d[1],f=i.useState(null),x=(0,a.Z)(f,2),b=x[0],p=x[1],j=i.useState(null),g=(0,a.Z)(j,2),Z=g[0],N=g[1],y=i.useState(null),k=(0,a.Z)(y,2),S=k[0],w=k[1],C=i.useState(null),M=(0,a.Z)(C,2),I=M[0],E=M[1];i.useEffect((function(){c.hi.get("/sections").then((function(e){N(e.data),w(e.data[0].id),E(e.data[0].cards)})).catch((function(e){console.log(e)}))}),[]),i.useEffect((function(){if(S){var e,t=Z.find((function(e){return e.id==S})).cards;E(t),v((0,l.Z)((0,l.Z)({},u),{},{cardId:null===(e=t[0])||void 0===e?void 0:e.id}))}}),[S]),i.useEffect((function(){var e,n,l,a,i;(w(null===u||void 0===u||null===(e=u.card)||void 0===e||null===(n=e.section)||void 0===n?void 0:n.id),v(u),0==(null===(l=t.current)||void 0===l?void 0:l.hasFocus()))&&(null!==u&&void 0!==u&&u.content?null===(a=t.current)||void 0===a||a.setContent(null===u||void 0===u?void 0:u.content):null===(i=t.current)||void 0===i||i.setContent(""))}),[u]);return(0,h.jsxs)(r.Z,{reset:function(e){document.querySelector("textarea").value="",w(Z[0].id),v((0,l.Z)((0,l.Z)({},n),{},{cardId:Z[0].cards[0].id}))},sort:function(e){e.sort((function(e,t){var n,l,a,i,r,o,c,s,d,u,v,h;return(null===(n=e.card)||void 0===n||null===(l=n.section)||void 0===l?void 0:l.order)==(null===(a=t.card)||void 0===a||null===(i=a.section)||void 0===i?void 0:i.order)?(null===(d=e.card)||void 0===d?void 0:d.order)==(null===(u=t.card)||void 0===u?void 0:u.order)?e.order-t.order:(null===(v=e.card)||void 0===v?void 0:v.order)-(null===(h=t.card)||void 0===h?void 0:h.order):(null===(r=e.card)||void 0===r||null===(o=r.section)||void 0===o?void 0:o.order)-(null===(c=t.card)||void 0===c||null===(s=c.section)||void 0===s?void 0:s.order)}))},defaultModel:n,model:u,setModel:v,models:b,setModels:p,title:"Pages",apiPath:"/pages",cols:[{name:"id",label:"ID",getValue:function(e){return e.id}},{name:"title",label:"Title",getValue:function(e){return e.title}},{name:"order",label:"Order",getValue:function(e){return e.order}},{name:"section",label:"Section",getValue:function(e){var t,n;return null===(t=e.card)||void 0===t||null===(n=t.section)||void 0===n?void 0:n.title}},{name:"card",label:"Card",getValue:function(e){var t;return null===(t=e.card)||void 0===t?void 0:t.title}},{name:"accepted",label:"Approved",getValue:function(e){return e.accepted?"Yes":"No"}}],children:[(0,h.jsx)("input",{type:"hidden",name:"id",value:u?u.id:0}),(0,h.jsx)(o.Z,{label:"Title",children:(0,h.jsx)("input",{name:"title",type:"text",className:"input input-bordered",value:u?u.title:"",onChange:function(e){v((0,l.Z)((0,l.Z)({},u),{},{title:e.target.value}))}})}),(0,h.jsx)(o.Z,{label:"Order",children:(0,h.jsx)("input",{name:"order",type:"number",className:"input input-bordered",value:u?u.order:"",onChange:function(e){v((0,l.Z)((0,l.Z)({},u),{},{order:e.target.value}))}})}),(0,h.jsx)(o.Z,{label:"Section",children:(0,h.jsx)("select",{name:"sectionId",className:"select select-bordered w-full",value:S,onChange:function(e){w(e.target.value)},children:null===Z||void 0===Z?void 0:Z.map((function(e,t){return(0,h.jsx)("option",{value:e.id,children:e.title},t)}))})}),(0,h.jsx)(o.Z,{label:"Card",children:(0,h.jsx)("select",{name:"cardId",className:"select select-bordered w-full",value:u?u.cardId:I?null===(e=I[0])||void 0===e?void 0:e.id:"",onChange:function(e){v((0,l.Z)((0,l.Z)({},u),{},{cardId:e.target.value}))},children:null===I||void 0===I?void 0:I.map((function(e,t){return(0,h.jsx)("option",{value:e.id,children:e.title},t)}))})}),(0,h.jsx)(o.Z,{label:"Approved",children:(0,h.jsx)("input",{type:"checkbox",className:"checkbox",checked:!!u&&u.accepted,onChange:function(e){v((0,l.Z)((0,l.Z)({},u),{},{accepted:e.target.checked}))}})}),(0,h.jsx)(o.Z,{label:"Content"}),(0,h.jsx)("div",{className:"",children:(0,h.jsx)(m,{onInit:function(e,n){return t.current=n},init:{height:600,menubar:"edit view insert format tools table",plugins:"paste searchreplace autolink directionality code visualblocks visualchars fullscreen image link media codesample table charmap hr nonbreaking anchor toc insertdatetime advlist lists wordcount imagetools textpattern noneditable help charmap quickbars emoticons",toolbar:"undo redo | bold italic | numlist bullist | forecolor backcolor removeformat | charmap emoticons | fullscreen image media link anchor codesample | ltr rtl",toolbar_sticky:!0,content_style:"body { font-family: Tahoma; font-size: 14px; background-color: #000; color: #c7c7c7; }",codesample_languages:[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C#",value:"csharp"},{text:"SQL",value:"sql"},{text:"Bash",value:"bash"}]},onEditorChange:function(e,t){v((0,l.Z)((0,l.Z)({},u),{},{content:e}))}})})]})}}}]);
//# sourceMappingURL=33.5155a093.chunk.js.map