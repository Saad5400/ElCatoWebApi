"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[669,818],{9818:function(e,t,n){n.r(t),n.d(t,{DataContext:function(){return u},default:function(){return d}});var i=n(9439),l=n(2791),s=n(7689),r=n(1087),a=n(8908),c=n(184),u=(0,l.createContext)(null);function d(e){var t=(0,l.useState)(null),n=(0,i.Z)(t,2),d=n[0],o=n[1],m=(0,l.useState)(!1),f=(0,i.Z)(m,2),h=f[0],x=f[1],j=(0,s.TH)();return(0,l.useEffect)((function(){j.pathname.includes("upsert")||a.hi.get("/"+e.title).then((function(t){if(200===t.status){var n=t.data;n.length>0&&(e.ignore&&e.ignore.forEach((function(e){n=n.map((function(t){return delete t[e],t}))})),n=n.sort((function(e,t){return e.order-t.order})),o(n))}})).catch((function(e){}))}),[j.pathname,h]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"w-full flex justify-between",children:[(0,c.jsx)("h1",{className:"text-3xl text-primary my-2 ms-5",children:e.title}),(0,c.jsx)(r.rU,{to:"/admin/"+e.title+"/upsert",children:(0,c.jsx)("button",{className:"btn btn-primary btn-sm me-5 my-2",children:"New"})})]}),(0,c.jsx)(u.Provider,{value:{data:d},children:(0,c.jsx)(s.j3,{})}),(0,c.jsx)("div",{className:"overflow-x-auto w-[28rem] sm:w-full",children:(0,c.jsx)("div",{className:"table-container",children:(0,c.jsxs)("table",{className:"table table-hover",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[d&&Object.keys(d[0]).map((function(e,t){return(0,c.jsx)("th",{children:e},t)})),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:d&&d.map((function(t,n){return(0,c.jsxs)("tr",{children:[Object.values(t).map((function(e,t){return(0,c.jsx)("td",{children:"object"===typeof e?e.title:e},t)})),(0,c.jsxs)("td",{children:[(0,c.jsx)(r.rU,{to:"/admin/"+e.title+"/upsert/"+t.id,children:(0,c.jsx)("button",{className:"link link-accent",children:"Edit"})}),"\xa0",(0,c.jsx)("button",{onClick:function(n){window.confirm("Are you sure you want to delete this item?")&&a.hi.delete("/"+e.title+"/"+t.id).then((function(e){e.status.toString().startsWith("2")&&x(!h)})).catch((function(e){}))},className:"link link-error",children:"Delete"})]})]},n)}))})]})})}),(0,c.jsx)("br",{})]})}},882:function(e,t,n){n.d(t,{N:function(){return u},Z:function(){return d}});var i=n(8683),l=n(9439),s=n(7689),r=n(2791),a=n(8908),c=n(184);function u(e){return(0,c.jsxs)("div",{className:"form-control w-full "+e.className,children:[(0,c.jsx)("label",{className:"label label-text",children:e.label}),e.children]})}function d(e){var t=(0,s.UO)().id,n=(0,s.TH)(),u=(0,s.s0)(),d=t?"Update":"Create",o=(0,r.useState)(!1),m=(0,l.Z)(o,2),f=m[0],h=m[1],x=(0,r.useState)(""),j=(0,l.Z)(x,2),p=j[0],b=j[1];return(0,r.useEffect)((function(){b(""),h(!1),e.reloadEffect()}),[n.pathname]),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"w-full flex justify-between",children:(0,c.jsxs)("div",{className:"my-2 mx-5 w-full",children:[(0,c.jsxs)("h1",{className:"text-warning",children:[d," ",p]}),(0,c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),h(!0),a.hi.post("/"+e.title+"/upsert",(0,i.Z)({},Object.fromEntries(new FormData(t.target)))).then((function(t){t.status.toString().startsWith("2")&&(b("Success"),u("/admin/"+e.title))})).catch((function(e){b("Failed")})).finally((function(){h(!1)}))},children:[(0,c.jsx)("div",{className:"w-full grid lg:grid-cols-2 lg:gap-x-4",children:e.children}),(0,c.jsx)("br",{}),(0,c.jsx)("div",{className:"form-control w-full",children:(0,c.jsx)("button",{disabled:f,className:"btn btn-block btn-primary",children:f?(0,c.jsx)("div",{className:"loading loading-dots"}):d})})]})]})})})}},5669:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var i=n(9439),l=n(882),s=n(8908),r=n(2791),a=n(9818),c=n(7689),u=n(184);function d(e){var t=(0,r.useState)([]),n=(0,i.Z)(t,2),d=n[0],o=n[1],m=(0,c.UO)().id;m=m||0;var f=a.DataContext._currentValue.data,h=f&&f.find((function(e){return e.id===parseInt(m)}));return(0,r.useEffect)((function(){s.hi.get("/sections").then((function(e){if(e.status.toString().startsWith("2")){var t=e.data.map((function(e){return(0,u.jsx)("option",{value:e.id,children:e.title},e.id)}));o(t)}})).catch((function(e){}))}),[]),(0,u.jsxs)(l.Z,{reloadEffect:function(){h?(document.getElementsByName("title")[0].value=h.title,document.getElementsByName("subtitle")[0].value=h.subtitle,document.getElementsByName("order")[0].value=h.order,setTimeout((function(){document.getElementsByName("sectionId")[0].value=h.section.id}),250)):(document.getElementsByName("title")[0].value="",document.getElementsByName("subtitle")[0].value="",document.getElementsByName("order")[0].value=0,document.getElementsByName("sectionId")[0].value=1)},title:"cards",children:[(0,u.jsx)("input",{name:"id",type:"hidden",value:m}),(0,u.jsx)(l.N,{label:"Title",children:(0,u.jsx)("input",{name:"title",type:"text",className:"input responsive-input input-bordered w-full"})}),(0,u.jsx)(l.N,{label:"Sub-Title",children:(0,u.jsx)("input",{name:"subtitle",type:"text",className:"input responsive-input input-bordered w-full"})}),(0,u.jsx)(l.N,{label:"Order",children:(0,u.jsx)("input",{name:"order",type:"number",className:"input responsive-input input-bordered w-full"})}),(0,u.jsx)(l.N,{label:"Section",children:(0,u.jsx)("select",{name:"sectionId",className:"select responsive-select select-bordered w-full",children:d})})]})}}}]);
//# sourceMappingURL=669.89dff0de.chunk.js.map