{"version":3,"file":"static/js/918.b71a691b.chunk.js","mappings":"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","sources":["components/AdminTable.js","components/Alert.js","components/FormControl.js","pages/admin/SectionsTable.js"],"sourcesContent":["import React from \"react\";\r\nimport { api } from \"../App\";\r\nimport Alert from \"./Alert\";\r\nimport { UserContext } from \"../App\";\r\n\r\nexport default function AdminTable(props) {\r\n\r\n    const { model, setModel, models, setModels, sort, defaultModel } = props;\r\n\r\n    const userContext = React.useContext(UserContext);\r\n    const [error, setError] = React.useState(null);\r\n    const [success, setSuccess] = React.useState(null);\r\n\r\n    const CREATE = \"Create\",\r\n        EDIT = \"Edit\";\r\n    const [state, setState] = React.useState(CREATE); // Create, Edit\r\n\r\n    React.useEffect(() => {\r\n        api.get(props.apiPath).then(res => {\r\n            let data = res.data;\r\n            sort(data);\r\n            setModels(data);\r\n        }).catch(err => {\r\n            console.log(err);\r\n        });\r\n    }, []);\r\n\r\n    function reset(e) {\r\n        e.preventDefault();\r\n        setError(null);\r\n        setSuccess(null);\r\n        // setState(CREATE);\r\n        setModel(defaultModel);\r\n        document.querySelector(\"form[id=mainForm]\").reset();\r\n        document.querySelectorAll(\"button\").forEach(b => b.disabled = false);\r\n        props.reset && props.reset(e);\r\n    }\r\n\r\n    function handleDelete(e) {\r\n        reset(e);\r\n        const id = e.target.value;\r\n        api.delete(`${props.apiPath}/${id}`).then(res => {\r\n            if (res.status.toString().startsWith(\"2\")) {\r\n                setModels(models.filter(m => m.id != id));\r\n                setSuccess(\"Item deleted successfully\");\r\n            }\r\n            else {\r\n                setError(JSON.stringify(res));\r\n            }\r\n        }).catch(err => {\r\n            setError(JSON.stringify(err.message));\r\n        });\r\n        props.handleDelete && props.handleDelete(e);\r\n    }\r\n\r\n    function handleEdit(e) {\r\n        reset(e);\r\n        e.target.disabled = true;\r\n        setState(EDIT);\r\n        const id = e.target.value;\r\n        const model = models.find(s => s.id == id);\r\n        setModel(model);\r\n    }\r\n\r\n    function handleCreate(e) {\r\n        reset(e);\r\n        setState(CREATE);\r\n        props.handleCreate && props.handleCreate(e);\r\n    }\r\n\r\n    function submit(e) {\r\n        document.querySelector(\"button[id=submit]\").disabled = true;\r\n        api.post(`${props.apiPath}/upsert`, model)\r\n            .then(res => {\r\n                if (res.status.toString().startsWith(\"2\")) {\r\n                    setModel(res.data);\r\n                    let data;\r\n                    if (state === CREATE) {\r\n                        data = [...models, res.data];\r\n                    } else {\r\n                        data = models.map(s => s.id == res.data.id ? res.data : s);\r\n                    }\r\n                    sort(data);\r\n                    setModels(data);\r\n                    reset(e);\r\n                    setSuccess(\"model saved successfully\");\r\n                }\r\n                else {\r\n                    setError(JSON.stringify(res));\r\n                }\r\n            })\r\n            .catch(err => {\r\n                setError(JSON.stringify(err.message));\r\n            })\r\n            .finally(() => {\r\n                document.querySelector(\"button[id=submit]\").disabled = false;\r\n            });\r\n    }\r\n\r\n    return (<div className=\"w-full max-w-md sm:max-w-none h-full tajawal lg:mt-5\">\r\n        <form id=\"mainForm\">\r\n            <h1 className=\"flex justify-between\">\r\n                <span className=\"text-2xl\">\r\n                    {state} {model ? model.title : props.title}\r\n                </span>\r\n                <button className=\"btn btn-primary\" onClick={handleCreate}>\r\n                    New\r\n                </button>\r\n            </h1>\r\n            {props.children}\r\n            <div className=\"mt-5\">\r\n                <button id=\"submit\" className=\"btn btn-primary btn-block\" onClick={submit}>{state}</button>\r\n                {error && <Alert className=\"alert-error\">\r\n                    {error}\r\n                </Alert>}\r\n                {success && <Alert className=\"alert-success\">\r\n                    {success}\r\n                </Alert>}\r\n            </div>\r\n        </form>\r\n        <div className=\"mt-10\">\r\n\r\n        </div>\r\n        <h1 className=\"text-2xl\">Your {props.title}</h1>\r\n        <div className=\"overflow-auto w-full max-h-[30rem]\">\r\n            <table className=\"table\">\r\n                {/* head */}\r\n                <thead className=\"sticky top-0 bg-base-100\">\r\n                    <tr>\r\n                        {props.cols?.map((col, i) => (\r\n                            <th key={i}>{col.label}</th>\r\n                        ))}\r\n                        {userContext.isAdmin && <th>Actions</th>}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        models?.map((model, i) => (\r\n                            <tr key={i}>\r\n                                {props.cols?.map((col, j) => (\r\n                                    <td key={j}>{col.getValue(model)}</td>\r\n                                ))}\r\n                                {userContext.isAdmin && <td>\r\n                                    <button className=\"btn btn-sm btn-error hover:bg-red-900\" value={model.id} onClick={e => {\r\n                                        return window.confirm(\"Are you sure you want to delete this item?\") ? handleDelete(e) : null;\r\n                                    }}>Delete</button>\r\n                                    <button className=\"btn btn-sm btn-secondary\" value={model.id} onClick={handleEdit}>Edit</button>\r\n                                </td>}\r\n                            </tr>\r\n                        ))\r\n                    }\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <br />\r\n        <br />\r\n    </div>);\r\n}","export default function Alert(props) {\r\n\treturn (<div className={\"alert flex \" + props.className}>\r\n\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" className=\"stroke-current shrink-0 w-6 h-6\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path></svg>\r\n\t\t<span className=\"w-full\">\r\n\t\t\t{props.children}\r\n\t\t</span>\r\n\t</div>)\r\n}","export default function FormControl(props) {\r\n    return (\r\n        <div className={\"form-control w-full \" + props.className}>\r\n            <label className=\"label\">\r\n                <span className=\"label-text\">\r\n                    {props.label}\r\n                </span>\r\n            </label>\r\n            {props.children}\r\n        </div>\r\n    );\r\n}","import React from \"react\";\r\nimport AdminTable from \"../../components/AdminTable\";\r\nimport FormControl from \"../../components/FormControl\";\r\n\r\nexport default function SectionsTable(props) {\r\n\r\n    const [section, setSection] = React.useState(null);\r\n    const [sections, setSections] = React.useState(null);\r\n\r\n    function sort(sections) {\r\n        sections.sort((a, b) => a.order - b.order);\r\n    }\r\n\r\n    return (<AdminTable\r\n        sort={sort}\r\n        model={section}\r\n        setModel={setSection}\r\n        models={sections}\r\n        setModels={setSections}\r\n        title=\"Sections\"\r\n        apiPath=\"/sections\"\r\n        cols={[\r\n            { name: \"id\", label: \"ID\", getValue: (s) => s.id },\r\n            { name: \"title\", label: \"Title\", getValue: (s) => s.title },\r\n            { name: \"order\", label: \"Order\", getValue: (s) => s.order },\r\n        ]}\r\n    >\r\n        <input type=\"hidden\" name=\"id\" value={section ? section.id : 0} />\r\n        <FormControl label=\"Title\">\r\n            <input name=\"title\" type=\"text\" className=\"input input-bordered\" value={section ? section.title : \"\"} onChange={e => {\r\n                setSection({ ...section, title: e.target.value });\r\n            }} />\r\n        </FormControl>\r\n        <FormControl label=\"Order\">\r\n            <input name=\"order\" type=\"number\" className=\"input input-bordered\" value={section ? section.order : \"\"} onChange={e => {\r\n                setSection({ ...section, order: e.target.value });\r\n            }} />\r\n        </FormControl>\r\n    </AdminTable>);\r\n}"],"names":["AdminTable","props","_props$cols","model","setModel","models","setModels","sort","defaultModel","userContext","React","UserContext","_React$useState","_React$useState2","_slicedToArray","error","setError","_React$useState3","_React$useState4","success","setSuccess","CREATE","_React$useState5","_React$useState6","state","setState","reset","e","preventDefault","document","querySelector","querySelectorAll","forEach","b","disabled","handleEdit","target","id","value","find","s","api","get","apiPath","then","res","data","catch","err","console","log","_jsxs","className","children","title","_jsx","onClick","handleCreate","post","concat","status","toString","startsWith","_toConsumableArray","map","JSON","stringify","message","finally","Alert","cols","col","i","label","isAdmin","_props$cols2","j","getValue","window","confirm","delete","filter","m","handleDelete","xmlns","fill","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","FormControl","SectionsTable","section","setSection","sections","setSections","a","order","name","type","onChange","_objectSpread"],"sourceRoot":""}